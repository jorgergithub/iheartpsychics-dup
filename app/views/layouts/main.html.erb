<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title><%= page_title %></title>
  <meta name="description" content="<%= page_description %>">
  <meta name="keywords" content="<%= page_keywords %>">
  <link href='http://fonts.googleapis.com/css?family=Roboto:400,400italic,300,300italic,100italic,100' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Lato:100,300,400' rel='stylesheet' type='text/css'>
  <%= stylesheet_link_tag    "main", media: "all", "data-turbolinks-track" => true %>
  <%= javascript_include_tag "main", "data-turbolinks-track" => true %>
  <%= javascript_include_tag "https://js.stripe.com/v2/" %>
  <%= cloudinary_js_config %>
  <%= stylesheet_link_tag "" %>
  <%= csrf_meta_tags %>
</head>
<body class="<%= controller.controller_name %>" data-page="<%= current_page %>">

  <section class="user user-signin-element">
    <div class="user-container container_12">
      <div class="user-signup">
        <h1>Sign Up Using:</h1>

        <ul class="signup-links">
          <li class="signup-link">
            <%= link_to(image_tag("twitter.png", alt: "Twitter"), omniauth_authorize_path(:user, :twitter)) %>
          </li>

          <li class="signup-link">
            <%= link_to(image_tag("facebook.png", alt: "Facebook"), omniauth_authorize_path(:user, :facebook)) %>
          </li>

          <li class="signup-link">
            <%= link_to(image_tag("google+.png", alt: "Google+"), omniauth_authorize_path(:user, :google_oauth2)) %>
          </li>
        </ul>
      </div>

      <div class="user-signin">
        <h1>Sign Into I Heart Psychics:</h1>

        <%= form_for("user", url: user_session_path, remote: true, authenticity_token: true, html: { class: "signin-form" }) do |f| %>
          <div class="signin-inputs">
            <div class="signin-input">
              <%= f.text_field :login, placeholder: "Username" %>
            </div>

            <div class="signin-input">
              <%= f.password_field :password, placeholder: "Password" %>
            </div>

            <%= submit_tag "Sign In" %>
          </div>

          <p class="signin-actions">
            <a href="#" class="signin-actions-forgot modal_link" data-modal-id="forgot_password_modal">Forgot Username or Password?</a>
            <%= f.check_box :remember_me %>
            <label for="user_remember_me" class="signin-actions-remember">Remember Me</label>
          </p>
        <% end %>

        <%= link_to(image_tag("user-close.png", alt: "Close"), "#", class: "user-close") %>
      </div>
    </div>
  </section>

  <header class="header">
    <div class="header-container small_container">
      <div class="header-fold user-signin-element"></div>

      <%= link_to(image_tag("logo.png", alt: "IHeartPsychics"), root_url) %>

      <nav class="header-nav">
        <ul class="header-nav-links">
          <% if current_user %>
            <% unless current_user.psychic? %>
              <li class="dashboard header-nav-link nobg">
                <%= link_to content_tag(:i, "", class: "header-nav-link-arrow"), client_path %>
                My Account
              </li>
            <% end %>
            <% if current_user.client? %>
              <li class="balance header-nav-link nobg">
                <%= link_to content_tag(:i, "", class: "header-nav-link-plus"), "#", class: "modal_link", "data-modal-id" => "prices_modal" %>
                Balance <%= number_to_currency current_user.client.formatted_balance %>
              </li>
            <% end %>
            <li class="signout header-nav-link nobg">
              <%= link_to content_tag(:i, "", class: "header-nav-link-arrow"), destroy_user_session_path, :method => :delete %>
              Sign out
            </li>
          <% else %>
            <li class="signin header-nav-link">
              <%= content_tag(:i, "", class: "signup header-nav-link-arrow modal_link", data: { "modal-id" => "sign_up_modal" }) %>
              Sign Up

              <div class="modal_list">
                <%= render "modals/sign_up" %>
                <%= render "modals/sign_up_success" %>
                <%= render "modals/sign_in/sign_in_error" %>
                <%= render "modals/password/forgot_password" %>
                <%= render "modals/password/forgot_password_email_sent" %>
                <% if defined?(resource) and resource %>
                  <%= render "modals/password/reset_password" %>
                <% end %>
                <%= render "modals/password/reset_password_success" %>


                <% if params[:reset_password_token] %>
                  <script>
                    $(document).ready(function() {
                      showModal("reset_password_modal");
                    });
                  </script>
                <% end %>

                <% if params[:reset_password_success] %>
                  <script>
                    $(document).ready(function() {
                      showModal("reset_password_success_modal");
                    });
                  </script>
                <% end %>
              </div>
            </li>
            <li class="signin header-nav-link">
              <%= content_tag(:i, "", class: "signin header-nav-link-arrow") %>
              Sign In
            </li>
          <% end %>
        </ul>
      </nav>
    </div>
  </header>

  <nav class="nav">
    <div class="nav-container small_container">
      <% role = current_user ? current_user.role : "client" %>
      <ul class="nav-links">
        <%= render "#{role}_menu" %>
      </ul>

      <aside class="nav-info">
        Call Today: <span>888-635-2045</span>
      </aside>
    </div>
  </nav>

  <%= yield %>

  <%= render "horoscopes/footer_horoscope" %>
  <%= render "footer" %>

  <div class="overlay"></div>

  <%= render "modals/callback" %>
  <%= render "modals/callback_confirmation" %>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-44607874-1', 'iheartpsychics.co');
    ga('send', 'pageview');
  </script>

  <script type="text/javascript">
    Stripe.setPublishableKey("<%= Rails.configuration.stripe[:publishable_key] %>")
  </script>
</body>
