<section class="profile-container small_container">
  <div class="profile-avatar profile-item">
    <ul>
      <li class="avatar">
        <div class="uploading">
          <%= avatar_image_tag(@client.avatar_id) %>
        </div>
      </li>
      <li>
        <%= form_for(@client, url: avatar_client_path(@client), method: :patch, remote: true, html: { :class => "upload-picture", :'data-type' => 'json' }) do |f| %>

          <div class="upload">
            <span>Edit Your Picture</span>
            <%= f.cl_image_upload :avatar_id %>
          </div>
        <% end %>
      </li>
    </ul>
  </div>

  <div class="profile-daily-fortune profile-info profile-item">
    <h2>Hello, <span class="name"><%= @client.first_name %></span>!</h2>

    <p class="title">Daily Fortune!</p>

    <p class="text">
      Darkness ins't anything but
      the space in between light.
    </p>
  </div>

  <div class="profile-share-horoscope profile-item">
    <h2>Share your horoscope!</h2>

    <ul class="share-links">
      <li class="share-link">
        <%= link_to(image_tag("twitter-color.png", alt: "Twitter", class: "twitter"), "#") %>
      </li>

      <li class="share-link">
        <%= link_to(image_tag("facebook-color.png", alt: "Facebook", class: "facebook"), "#") %>
      </li>

      <li class="share-link">
        <%= link_to(image_tag("google-plus-color.png", alt: "Google+", class: "google-plus"), "#") %>
      </li>
    </ul>
  </div>
</section>

<section class="actions-container small_container">
  <div class="modal_list">
    <%= render "clients/modals/purchase/thank_you" %>
    <%= render "clients/modals/prices" %>
    <%= render "clients/modals/purchase/select_payment_method" %>
    <%= render "clients/modals/credit_card_list" %>
    <%= render "clients/modals/edit_credit_card" %>
    <%= render "clients/modals/pin" %>
    <%= render "clients/modals/password" %>
    <%= render "clients/modals/phone" %>
    <%= render "clients/modals/birthday" %>
  </div>

  <div class="my-credits client-action-item action-item">
    <h2>My Credits</h2>

    <div class="client-badge badge">
      <%= number_to_currency @client.balance %>
    </div>

    <div class="action">
      <a href="#" class="modal_link" data-modal-id="prices_modal">Add Credits</a>
    </div>
  </div>

  <div class="my-cards-on-file client-action-item action-item">
    <h2>My Cards on File</h2>

    <div class="client-badge badge">
      <%= @client.cards.count %>
    </div>

    <div class="action highlighted">
      <a href="#" class="modal_link" data-modal-id="credit_card_list_modal">Edit / Adds</a>
    </div>
  </div>

  <div class="my-pin client-action-item action-item">
    <h2>My Pin</h2>

    <div class="action">
      <a href="#" class="modal_link" data-modal-id="pin_modal">Edit</a>
    </div>
  </div>

  <div class="my-password client-action-item action-item">
    <h2>My Password</h2>

    <div class="action">
      <a href="#" class="modal_link" data-modal-id="password_modal">Edit</a>
    </div>
  </div>

  <div class="my-phone client-action-item action-item">
    <h2>My Phone</h2>

    <p id="client_phone"><%= @client.phones.first.number %></p>

    <div class="action">
      <a href="#" class="modal_link" data-modal-id="phone_modal">Edit</a>
    </div>
  </div>

  <div class="my-birthday-timezone client-action-item action-item">
    <h2>My Birthday &<br/> Timezone</h2>

    <p>March 1, 1982</p>

    <div class="action">
      <a href="#" class="modal_link" data-modal-id="birthday_modal">Edit</a>
    </div>
  </div>
</section>

<section class="client-history-container small_container">
  <h2 class="section-title">My Call History</h2>

  <table class="records">
    <thead>
      <tr>
        <th style="width: 130px;">Call ID</th>
        <th>Date & Time</th>
        <th style="width: 155px;">Phone Number<br/>Dialed From</th>
        <th>Reader Name</th>
        <th style="width: 130px;">Call Duration</th>
      </tr>
    </thead>

    <tbody>
      <% @processed_calls.each do |call| %>
        <tr>
          <td><%= call.id %></td>
          <td><%= call.created_at.strftime("%B, %d, %Y %I:%M%p") %></td>
          <td><%= call.from %></td>
          <td><%= call.psychic.alias_name %></td>
          <td><%= call.duration %> Mins</td>
        </tr>
      <% end %>
    </tbody>
  </table>
</section>

<section class="client-history-container small_container">
  <h2 class="section-title">My Purchase History</h2>

  <% if @credits.any? %>
    <table class="records">
      <thead>
        <tr>
          <th>Payment</th>
          <th>Amount</th>
          <th>Date Used</th>
          <th>Confirmation #</th>
        </tr>
      </thead>

      <tbody>
        <% @credits.each do |credit| %>
          <tr>
            <td><%= credit.payment %></td>
            <td><%= number_to_currency credit.credits %></td>
            <td><%= credit.parsed_date_only %></td>
            <td>#<%= credit.id %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  <% end %>
</section>
